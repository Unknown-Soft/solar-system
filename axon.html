<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mind World</title>
    <link rel="stylesheet" href="assets/styles/index.css">

    <link rel="apple-touch-icon" sizes="152x152" href="./assets/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="./assets/images/favicon/site.webmanifest">
    <link rel="mask-icon" href="./assets/images/favicon/safari-pinned-tab.svg" color="#000000">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="theme-color" content="#000000">
</head>

<body id="body">
    <section id="loading-screen">
        <img id="logo" src="assets/images/logo-text.png" alt="Mind World logo" />
        <div class="loader"></div>
    </section>

    <img id="logo-text" src="assets/images/logo-text.png" alt="Mind World logo text" />
    <button id="menu-toggle" class="menu-toggle button"></button>
    <button id="help-button" class="button"></button>
    <img id="show-label" class="hidden" src="./assets/images/eye_visible.png" alt="show labels" />
    <img id="twod-icon" class="hidden" src="./assets/images/2d.png" alt="open 2D website" />
    <nav class="nav-menu">
        <div id="menu" class="menu">

        </div>
    </nav>

    <script>
        //Detecting mobile devices with Regex
        const detectMobile = () => {
            let check = false;
            (function (a) { if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|mobile.+zafari|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);
            return check;
        }

        //open tab with Minworld website
        const logoText = document.getElementById('logo-text');
        logoText.addEventListener('click', () => {
            window.open('https://mindworld.io/', '_blank');
        });

        //open and close menu
        const button = document.getElementById('menu-toggle');
        const helpButton = document.getElementById('help-button');
        const showLabelButton = document.getElementById('show-label');
        const menuDiv = document.getElementById('menu');
        const twoIcon = document.getElementById('twod-icon');

        const body = document.getElementById('body');
        button.addEventListener('click', () => {
            showLabelButton.classList.toggle('hidden');
            twoIcon.classList.toggle('hidden');
            menuDiv.innerHTML = `<div id="column-one" class="element">
                <h2>Soluciones de negocio</h2>
                <span><a href="https://mindworld.io/axon-tokenomics/" target="_blank">Sol: Axon</a></span>
                <div class="m-15">
                    <h3><a href="https://cdepaz.com/mindsolutions/fidelizacion/" target="_blank">Mind Club</a></h3> <img
                        class="plus" src="./assets/images/plus.svg" alt="plus image" width="16" height="16" />
                </div>
                <div class="ml-60">
                    <h4><a href="https://cdepaz.com/mindsolutions/soluciones-integrales/" target="_blank">Mind app</a>
                    </h4>
                    <h4><a href="https://mindworld.io/mind-card/" target="_blank">Mind card</a></h4>
                </div>
                <div class="m-15">
                    <h3><a href="https://cdepaz.com/mindsolutions/" target="_blank">Mind Solutions</a></h3> <img
                        class="plus" src="./assets/images/plus.svg" alt="plus image" width="16" height="16" />
                </div>
                <div class="ml-60">
                    <h4><a href="https://mindworld.io" target="_blank">Mind Pos</a></h4>
                    <h4><a href="https://cdepaz.com/mindsolutions/ecommerce/" target="_blank">Mind Orders</a></h4>
                    <h4><a href="https://mindworld.io/mind-store/" target="_blank">Mind Store</a></h4>
                    <h4><a href="https://mindworld.io/mindpagos-crypto-store/" target="_blank">Mind Pay</a></h4>
                </div>
            </div>
            <div id="column-two" class="element">
                <h2>Tokenizaci贸n de proyectos</h2>
                <span><a href="https://mindworld.io/mind-pool" target="_blank">Sol: Mind Pool</a></span>
                <div class="m-15">
                    <h3><a href="https://mindworld.io/mind-franquicias/">Mind Franchises</a></h3> <img class="plus"
                        src="./assets/images/plus.svg" alt="plus image" width="16" height="16" />
                </div>
                <div class="ml-60">
                    <h4><a href="https://mindworld.io/mind-franquicias/" target="_blank">Express</a></h4>
                    <h4><a href="https://mindworld.io/mind-franquicias/" target="_blank">Classic</a></h4>
                    <h4><a href="https://mindworld.io/mind-franquicias/" target="_blank">Work</a></h4>
                </div>

                <div class="m-15">
                    <h3><a href="https://mindworld.io/mind-verse/" target="_blank">Mind Verse</a></h3> <img class="plus"
                        src="./assets/images/plus.svg" alt="plus image" width="16" height="16" />
                </div>
                <div class="m-15">
                    <h3><a href="https://mindworld.io" target="_blank">Mind Nft's</a></h3> <img class="plus"
                        src="./assets/images/plus.svg" alt="plus image" width="16" height="16" />
                </div>
                <div class="m-15">
                    <h3><a href="https://mindworld.io/mindworld-pagos-debito-credito/" target="_blank">Mind
                            Productos</a></h3> <img class="plus" src="./assets/images/plus.svg" alt="plus image"
                        width="16" height="16" />
                </div>
                <div class="ml-60">
                    <h4><a href="https://mindworld.io/mind-beer/" target="_blank">Mind Beer</a></h4>
                    <h4><a href="https://mindworld.io/mind-coffee/" target="_blank">Mind Coffee</a></h4>
                    <h4><a href="https://mindworld.io/mind-draft/" target="_blank">Mind Draft</a></h4>
                    <h4><a href="https://mindworld.io/mind-cajero-monedas/" target="_blank">Mind K1</a></h4>
                </div>
            </div>
            <div id="column-three" class="element ml-20">
                <h2>Nosotros</h2>
                <div class="m-15">
                    <h3><a href="https://mindworld.io/wp-content/uploads/2022/04/MindWorld-Mayo-2022.pdf"
                            target="_blank">Visi贸n</a></h3> <img class="plus" src="./assets/images/plus.svg"
                        alt="plus image" width="16" height="16" />
                </div>
                <div class="m-15">
                    <h3><a href="https://mindworld.io/mind-team/" target="_blank">Equipo</a></h3> <img class="plus"
                        src="./assets/images/plus.svg" alt="plus image" width="16" height="16" />
                </div>
                <div class="m-15">
                    <h3><a href="https://mindworld.io/#contacto" target="_blank">Contactos</a></h3> <img class="plus"
                        src="./assets/images/plus.svg" alt="plus image" width="16" height="16" />
                </div>
                <div class="ml-60">
                    <h4><a href="https://twitter.com/MindEcosystem" target="_blank">Twitter</a></h4>
                    <h4><a href="https://www.instagram.com/mind.ecosystem" target="_blank">Instagram</a></h4>
                    <h4><a href="https://www.facebook.com/MindEcosystem/" target="_blank">Facebook</a></h4>
                    <h4><a href="https://www.youtube.com/channel/UCX0fu6Pcikjqi6RGg1Frjog" target="_blank">Youtube</a>
                    </h4>
                </div>
            </div>`;
            setTimeout(() => {
                body.classList.toggle('open');
                helpButton.classList.toggle('hidden');
            }, 200)
        }, false);

        helpButton.addEventListener('click', () => {
            body.classList.toggle('open');
            button.classList.toggle('hidden');
            showLabelButton.classList.toggle('hidden');
            twoIcon.classList.toggle('hidden');

            if (detectMobile()) {
                menuDiv.innerHTML =
                    `<div class="wrapper">
                        <h5 class="ml-60">Controles y navegaci贸n</h5>
                        <span>   <img class="" src="./assets/images/mobile-icons/swipe.png" alt="swipe image" width="36"
                            height="36" />
                            Puedes girar la escena con un dedo
                        </span>
                        <span>
                            <img class="" src="./assets/images/mobile-icons/two-fingers.png" alt="two fingers image" width="36"
                                height="36" />
                            Puedes moverte con los dos dedos
                        </span>
                        <span>
                            <img class="" src="./assets/images/mobile-icons/hold.png" alt="hold screen image" width="36"
                                height="36" />
                            Presiona un planeta para ver </br> <span class="ml-60"> su nombre </span>
                        </span>
                        <span>
                            <img class="" src="./assets/images/mobile-icons/zoom-in.png" alt="zoonm image" width="36"
                                height="36" />
                            Te puedes acercar y alejar haciendo </br> <span class="ml-60"> zoom con ambos dedos</span>
                        </span>
                        <span>
                            <img class="" src="./assets/images/mobile-icons/click.png" alt="tap screen image" width="36"
                                height="36" />
                            Hacer tap en un planeta para ir </br> <span class="ml-60"> a la pagina web</span>
                        </span>
                    </div>`;
            }
            else {
                menuDiv.innerHTML =
                    `<div class="wrapper">
                        <span>Controles y navegaci贸n</span>
                        <span> <img class="" src="./assets/images/pc-icons/left-click.png" alt="right click image" width="36"
                            height="36" />
                            Puedes girar la escena con clik izquierdo</span>
                        <span><img class="" src="./assets/images/pc-icons/right.png" alt="left click image" width="36"
                            height="36" />
                            Puedes moverte con clik derecho</span>
                        <span> <img class="" src="./assets/images/pc-icons/cursor.png" alt="cursor image" width="36" height="36" />
                            Pasa el cursor por encima de un planeta para ver su nombre</span>
                        <span> <img class="" src="./assets/images/pc-icons/scroll.png" alt="mouse scroll image" width="36"
                            height="36" />
                            Te puedes acercar y alejar con el scroll del mouse</span>
                        <span>  <img class="" src="./assets/images/pc-icons/left.png" alt="left click image" width="36"
                            height="36" />
                            Hacer clik en un planeta para ir a la pagina web</span>
                    </div >`;
            }
        }, false);

        //Menu: manage scroll on mobile devices
        var last_scroll_position, new_scroll_position = 0;
        const logo = document.getElementById("logo-text");

        const menu = document.getElementById("menu-toggle");
        const menuContainer = document.querySelector(".menu");

        menuContainer.addEventListener('scroll', function (e) {
            last_scroll_position = menuContainer.scrollTop;

            // Scrolling down icons
            if (new_scroll_position < last_scroll_position && last_scroll_position > 60) {
                logo.classList.remove("slideDown");
                logo.classList.add("slideUp");
                menu.classList.remove("slideDown");
                menu.classList.add("slideUp");

                // Scrolling up icons
            } else if (new_scroll_position > last_scroll_position) {
                logo.classList.remove("slideUp");
                logo.classList.add("slideDown");
                menu.classList.remove("slideUp");
                menu.classList.add("slideDown");
            }
            new_scroll_position = last_scroll_position;
        });
    </script>

    <script type="module">
        import * as THREE from './js/three.module.js';
        import { OrbitControls } from './js/OrbitControls.min.js';
        import { GLTFLoader } from "./js/GLTFLoader.min.js";
        import { CSS2DRenderer, CSS2DObject } from "./js/CSS2DRenderer.min.js";
        import { Lensflare, LensflareElement } from "./js/Lensflare.min.js";

        THREE.Cache.enabled = true;

        let action,
            ambientLight,
            blackWhite,
            blackWhiteDiv,
            brown,
            brownDiv,
            camera,
            container,
            clips,
            clock,
            controls,
            darkBlue,
            darkBlueDiv,
            darkBrown,
            darkBrownDiv,
            directionalLight,
            geometry,
            gltfLoader,
            hemiLightDown,
            hemiLightUp,
            labelRenderer,
            lightBlue,
            lightBlueDiv,
            loadingManager,
            loadingScreen,
            material,
            mixer,
            mouse,
            orange,
            particles,
            pointLight,
            pmremGenerator,
            raycaster,
            red,
            redDiv,
            renderer,
            scene,
            sprite,
            sun,
            vertices,
            x,
            y,
            z,
            orangeDiv,
            blueDiv,
            greenDiv,
            sunDiv,
            whiteBlue,
            whiteBlueDiv,
            blackDiv,
            count = 0,
            twodIcon,
            showLabel,
            isShowingLabels = false;

        const parameters = {};
        parameters.branches = 4;
        parameters.count = 100;
        parameters.insideColor = "#cf6523"
        parameters.outsideColor = "#f7340c";
        parameters.radius = 15;
        parameters.randomness = 0.1;
        parameters.randomnessPower = 1;
        parameters.size = 0.1;
        parameters.spin = 2;

        const init = () => {

            // Css2d Renderer
            brownDiv = document.createElement('div');
            brownDiv.className = 'label';
            brownDiv.textContent = 'Mind Pos';
            brownDiv.style.marginTop = '-1em';
            const brownLabel = new CSS2DObject(brownDiv);
            brownLabel.position.set(16, 11, 0);

            orangeDiv = document.createElement('div');
            orangeDiv.className = 'label';
            orangeDiv.textContent = 'Mind Solutions';
            orangeDiv.style.marginTop = '-1em';
            const orangeLabel = new CSS2DObject(orangeDiv);
            orangeLabel.position.set(0, 10.5, 0);

            redDiv = document.createElement('div');
            redDiv.className = 'label';
            redDiv.textContent = 'Mind Club';
            redDiv.style.marginTop = '-1em';
            const redDLabel = new CSS2DObject(redDiv);
            redDLabel.position.set(0, 13, 0);

            darkBlueDiv = document.createElement('div');
            darkBlueDiv.className = 'label';
            darkBlueDiv.textContent = 'Mind Orders';
            darkBlueDiv.style.marginTop = '-1em';
            const darkblueLabel = new CSS2DObject(darkBlueDiv);
            darkblueLabel.position.set(-16, 12, 0);

            darkBrownDiv = document.createElement('div');
            darkBrownDiv.className = 'label';
            darkBrownDiv.textContent = 'Mind Card';
            darkBrownDiv.style.marginTop = '-1em';
            const darkBrownLabel = new CSS2DObject(darkBrownDiv);
            darkBrownLabel.position.set(16, 12, 0);

            sunDiv = document.createElement('div');
            sunDiv.className = 'label';
            sunDiv.textContent = 'Axon';
            sunDiv.style.marginTop = '-1em';
            const sunLabel = new CSS2DObject(sunDiv);
            sunLabel.position.set(0, 11, 0);

            whiteBlueDiv = document.createElement('div');
            whiteBlueDiv.className = 'label';
            whiteBlueDiv.textContent = 'Mind App';
            whiteBlueDiv.style.marginTop = '-1em';
            const whiteBlueLabel = new CSS2DObject(whiteBlueDiv);
            whiteBlueLabel.position.set(0, 11, 0);

            blackWhiteDiv = document.createElement('div');
            blackWhiteDiv.className = 'label';
            blackWhiteDiv.textContent = 'Mind Store';
            blackWhiteDiv.style.marginTop = '-1em';
            const blackWhiteLabel = new CSS2DObject(blackWhiteDiv);
            blackWhiteLabel.position.set(19, 11, 0);

            lightBlueDiv = document.createElement('div');
            lightBlueDiv.className = 'label';
            lightBlueDiv.textContent = 'Mind Pay';
            lightBlueDiv.style.marginTop = '-1em';
            const lightBlueLabel = new CSS2DObject(lightBlueDiv);
            lightBlueLabel.position.set(0, 11, 0);


            labelRenderer = new CSS2DRenderer();
            labelRenderer.setSize(window.innerWidth, window.innerHeight);
            labelRenderer.domElement.style.position = 'fixed';
            labelRenderer.domElement.style.top = '0px';
            document.body.appendChild(labelRenderer.domElement);

            //toggle 2D icon
            twodIcon = document.getElementById('twod-icon');
            twodIcon.addEventListener('click', () => {
                window.open('https://mindworld.io/', '_blank');
            });

            //toggle show labels
            showLabel = document.getElementById('show-label');
            showLabel.addEventListener('click', () => {
                isShowingLabels = !isShowingLabels;
                if (showLabel.src.includes('eye_visible')) {
                    showLabel.src = './assets/images/eye_slash.png';
                    document.querySelectorAll('.label').forEach(label => {
                        label.style.animation = 'anim-lineUp 2s';
                        label.classList.remove('hidden')
                    });
                } else {
                    showLabel.src = './assets/images/eye_visible.png';
                    document.querySelectorAll('.label').forEach(label => {
                        label.style.animation = 'anim-lineUp 2s';
                        label.classList.add('hidden')
                    });
                }
            });

            //Animation
            clock = new THREE.Clock();

            //Scene
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.5, 25000);
            camera.position.set(0, 18000, 0);
            scene.add(camera);

            //Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.domElement.id = "canva";
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.shadowMap.enable = true;
            renderer.toneMappingExposure = 1;
            renderer.outputEncoding = THREE.sRGBEncoding;
            document.body.appendChild(renderer.domElement);


            //Controls
            controls = new OrbitControls(camera, labelRenderer.domElement);
            controls.listenToKeyEvents(document.body)
            controls.keys = {
                LEFT: "ArrowLeft", //left arrow
                UP: "ArrowUp", // up arrow
                RIGHT: "ArrowRight", // right arrow
                BOTTOM: "ArrowDown" // down arrow
            }
            controls.mouseButtons = {
                LEFT: THREE.MOUSE.ROTATE,
                MIDDLE: THREE.MOUSE.DOLLY,
                RIGHT: THREE.MOUSE.PAN
            }
            controls.touches = {
                ONE: THREE.TOUCH.ROTATE,
                TWO: THREE.TOUCH.DOLLY_PAN

            }

            controls.target.y = -1;
            controls.enabled = true;
            controls.enableDamping = true;
            controls.autoRotateSpeed = 1;
            controls.minDistance = 3000;
            controls.maxDistance = 18000;

            //Loading manager
            loadingManager = new THREE.LoadingManager(() => {
                loadingScreen = document.getElementById('loading-screen');
                loadingScreen.classList.add('fade-out');
                // Remove loader from DOM via event listener
                loadingScreen.addEventListener('transitionend', onTransitionEnd);
                if (document.getElementById('loader'))
                    document.getElementById('loader').remove();
            });

            // GLTFLoader
            gltfLoader = new GLTFLoader(loadingManager);
            gltfLoader.load('./assets/model/Planets/Planets_organized.gltf',
                (gltf) => {

                    scene.add(gltf.scene);
                    sun = gltf.scene.getObjectByName('sun');
                    brown = gltf.scene.getObjectByName('brown');
                    orange = gltf.scene.getObjectByName('orange');
                    red = gltf.scene.getObjectByName('red');
                    lightBlue = gltf.scene.getObjectByName('lightBlue');
                    darkBlue = gltf.scene.getObjectByName('darkBlue');
                    whiteBlue = gltf.scene.getObjectByName('whiteBlue');
                    blackWhite = gltf.scene.getObjectByName('blackWhite');
                    darkBrown = gltf.scene.getObjectByName('darkBrown');

                    mixer = new THREE.AnimationMixer(gltf.scene);
                    clips = gltf.animations;
                    clips.forEach(function (clip) {
                        action = mixer.clipAction(clip);
                        action.timeScale = 1 / 70;
                        action.time = 100;
                        action.play();
                    });
                    sun.add(sunLabel);
                    brown.add(brownLabel);
                    orange.add(orangeLabel);
                    red.add(redDLabel);
                    lightBlue.add(lightBlueLabel);
                    darkBlue.add(darkblueLabel);
                    whiteBlue.add(whiteBlueLabel);
                    blackWhite.add(blackWhiteLabel);
                    darkBrown.add(darkBrownLabel)
                },
                (xhr) => {
                    console.log((xhr.loaded / xhr.total * 100) + '% loaded');
                },
                (error) => {
                    console.log('An error happened');
                }
            );

            //Lights

            //PointLight
            pointLight = new THREE.PointLight(0xe34119, 1.5, 0);
            if (sun)
                pointLight.add(sun);
            pointLight.castShadow = true;
            pointLight.shadow.mapSize.width = 2048;
            pointLight.shadow.mapSize.height = 2048;
            pointLight.shadow.camera.near = 0.5;
            pointLight.shadow.camera.far = 5000;
            scene.add(pointLight);

            hemiLightUp = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.3);
            hemiLightUp.color.setHSL(0.3, 0.3, 0.3);
            hemiLightUp.groundColor.setHSL(0.095, 1, 0.75);
            hemiLightUp.position.set(0, 70, 0);
            hemiLightUp.castShadow = true;
            scene.add(hemiLightUp);

            hemiLightDown = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.3);
            hemiLightDown.color.setHSL(0.3, 0.3, 0.3);
            hemiLightDown.groundColor.setHSL(0.095, 1, 0.75);
            hemiLightDown.position.set(0, -70, 0);
            scene.add(hemiLightDown);

            //Mouse coors
            mouse = new THREE.Vector2();

            //Raycaster
            raycaster = new THREE.Raycaster();

            //stars

            geometry = new THREE.BufferGeometry();
            vertices = [];

            sprite = new THREE.TextureLoader().load('assets/images/disc.png');
            let particlesCount = 10000;
            if (detectMobile())
                particlesCount = 2000;

            for (let i = 0; i < particlesCount; i++) {

                x = 30000 * Math.random() - 15000;
                y = 20000 * Math.random() - 10000;
                z = 30000 * Math.random() - 15000;

                vertices.push(x, y, z);
            }

            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));

            material = new THREE.PointsMaterial({ color: 0xDBD81A, size: 55, sizeAttenuation: true, map: sprite, alphaTest: 0.5, transparent: true });

            particles = new THREE.Points(geometry, material);

            scene.add(particles);

            animate();

            // lensflares
            const textureLoader = new THREE.TextureLoader();

            const textureFlare0 = textureLoader.load('assets/images/lensflare0.png');
            const textureFlare3 = textureLoader.load('assets/images/lensflare3.png');

            addLight(0.08, 0.8, 0.5, 0, -750, 0);
            addLight(0.08, 0.8, 0.5, 0, 750, 0);


            function addLight(h, s, l, x, y, z) {

                const light = new THREE.PointLight(0xffffff, 1.5, 2000);
                light.color.setHSL(h, s, l);
                light.position.set(x, y, z);
                scene.add(light);

                const lensflare = new Lensflare();
                lensflare.addElement(new LensflareElement(textureFlare0, 700, 0, light.color));
                lensflare.addElement(new LensflareElement(textureFlare3, 60, 0.6));
                lensflare.addElement(new LensflareElement(textureFlare3, 70, 0.7));
                lensflare.addElement(new LensflareElement(textureFlare3, 120, 0.9));
                lensflare.addElement(new LensflareElement(textureFlare3, 70, 1));
                light.add(lensflare);

            }
        }

        const generateGalaxy = () => {

            const geometry = new THREE.BufferGeometry();
            const positions = new Float32Array(parameters.count * 3);

            const colors = new Float32Array(parameters.count * 3);
            const colorInside = new THREE.Color(parameters.insideColor);
            const colorOutside = new THREE.Color(parameters.outsideColor);

            for (let i = 0; i < parameters.count; i++) {
                const i3 = i * 3;
                const radius = Math.random() * parameters.radius;
                const spinAngle = radius * parameters.spin;
                const branchAngle =
                    ((i % parameters.branches) / parameters.branches) * Math.PI * 2;

                const randomX =
                    Math.pow(Math.random(), parameters.randomnessPower) *
                    (Math.random() < 0.5 ? 1 : -1) *
                    parameters.randomness *
                    radius;
                const randomY =
                    Math.pow(Math.random(), parameters.randomnessPower) *
                    (Math.random() < 0.5 ? 1 : -1) *
                    parameters.randomness *
                    radius;
                const randomZ =
                    Math.pow(Math.random(), parameters.randomnessPower) *
                    (Math.random() < 0.5 ? 1 : -1) *
                    parameters.randomness *
                    radius;

                positions[i3] = Math.cos(branchAngle + spinAngle) * radius + randomX;
                positions[i3 + 1] = randomY;
                positions[i3 + 2] = Math.sin(branchAngle + spinAngle) * radius + randomZ;

                const mixedColor = colorInside.clone();
                mixedColor.lerp(colorOutside, radius / parameters.radius);
                colors[i3] = mixedColor.r;
                colors[i3 + 1] = mixedColor.g;
                colors[i3 + 2] = mixedColor.b;
            }
            geometry.setAttribute("position", new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute("color", new THREE.BufferAttribute(colors, 3));

            // Material
            const material = new THREE.PointsMaterial({
                size: parameters.size,
                sizeAttenuation: true,
                depthWrite: false,
                blending: THREE.AdditiveBlending,
                vertexColors: true,
            });

            // Points
            const points = new THREE.Points(geometry, material);
            points.name = "points";
            points.scale.set(90, 90, 90);
            points.position.set(0, 0, 0);

            scene.add(points);
        };

        //Remove loading
        const onTransitionEnd = (event) => {
            const element = event.target;
            element.remove();
            showLabel.classList.remove("hidden");
            twodIcon.classList.remove("hidden");
        }

        //Open new tab
        const openNewTabAndFocus = (url) => {
            window.open(url, '_blank', 'noopener', 'noreferrer');
        }

        //Events
        const onClick = () => {
            let count = 0;
            raycaster.setFromCamera(mouse, camera);
            let intersects = raycaster.intersectObjects(scene.children);
            if (intersects.length > 0) {
                for (let i = 0; i < intersects.length; i++) {
                    switch (intersects[i].object.name) {
                        case "brown":
                            if (count == 0) {
                                openNewTabAndFocus("https://mindworld.io/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;
                        case "orangeMesh":
                            if (count == 0) {
                                openNewTabAndFocus("https://cdepaz.com/mindsolutions/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;

                        case "orangeMesh_1":
                            if (count == 0) {
                                openNewTabAndFocus("https://cdepaz.com/mindsolutions/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;

                        case "whiteBlue":
                            if (count == 0) {
                                openNewTabAndFocus("https://cdepaz.com/mindsolutions/soluciones-integrales/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;
                        case "darkBlue":
                            if (count == 0) {
                                openNewTabAndFocus("https://cdepaz.com/mindsolutions/ecommerce/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;
                        case "sun":
                            if (count == 0) {
                                openNewTabAndFocus("https://mindworld.io/axon-tokenomics/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;

                        case "lightBlue":
                            if (count == 0) {
                                openNewTabAndFocus("https://mindworld.io/mindpagos-crypto-store/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;
                        case "darkBrown":
                            if (count == 0) {
                                openNewTabAndFocus("https://mindworld.io/mind-card/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;
                        case "redMesh":
                            if (count == 0) {
                                openNewTabAndFocus("https://cdepaz.com/mindsolutions/fidelizacion/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;
                        case "redMesh_1":
                            if (count == 0) {
                                openNewTabAndFocus("https://cdepaz.com/mindsolutions/fidelizacion/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;
                        case "blackWhiteMesh":
                            if (count == 0) {
                                openNewTabAndFocus("https://mindworld.io/mind-store/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;
                        case "blackWhiteMesh_1":
                            if (count == 0) {
                                openNewTabAndFocus("https://mindworld.io/mind-store/");
                                count++;
                            }
                            setTimeout(() => {
                                count = 0;
                            }, 2000);
                            break;
                        default:
                            break;
                    }
                }
            }
        }

        //Hover planet
        const onHover = () => {
            raycaster.setFromCamera(mouse, camera);
            let intersects = raycaster.intersectObjects(scene.children);
            if (intersects.length > 0) {
                if (clips)
                    clips.forEach(function (clip) {
                        action = mixer.clipAction(clip);

                        action.paused = true;
                    });
                controls.autoRotate = false;
                controls.dampingFactor = 0.01;
                for (let i = 0; i < intersects.length; i++) {
                    switch (intersects[i].object.name) {

                        case "brown":
                            brown.scale.set(20.3, 20.3, 20.3);
                            document.body.style.cursor = "grab";
                            brownDiv.classList.remove('hidden');
                            brownDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "orangeMesh":
                            orange.scale.set(40.3, 40.3, 40.3);
                            document.body.style.cursor = "grab";
                            orangeDiv.classList.remove('hidden');
                            orangeDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "orangeMesh_1":
                            orange.scale.set(40.3, 40.3, 40.3);
                            document.body.style.cursor = "grab";
                            orangeDiv.classList.remove('hidden');
                            orangeDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "whiteBlue":
                            whiteBlue.scale.set(20.3, 20.3, 20.3);
                            document.body.style.cursor = "grab";
                            whiteBlueDiv.classList.remove('hidden');
                            whiteBlueDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "darkBlue":
                            darkBlue.scale.set(20.3, 20.3, 20.3);
                            document.body.style.cursor = "grab";
                            darkBlueDiv.classList.remove('hidden');
                            darkBlueDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "sun":
                            sun.scale.set(60.3, 60.3, 60.3);
                            document.body.style.cursor = "grab";
                            sunDiv.classList.remove('hidden');
                            sunDiv.style.animation = "anim-lineUp 1s";
                            break;

                        case "lightBlue":
                            lightBlue.scale.set(20.3, 20.3, 20.3);
                            document.body.style.cursor = "grab";
                            lightBlueDiv.classList.remove('hidden');
                            lightBlueDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "darkBrown":
                            darkBrown.scale.set(20.3, 20.3, 20.3);
                            document.body.style.cursor = "grab";
                            darkBrownDiv.classList.remove('hidden');
                            darkBrownDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "redMesh":
                            red.scale.set(40.3, 40.3, 40.3);
                            document.body.style.cursor = "grab";
                            redDiv.classList.remove('hidden');
                            redDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "redMesh_1":
                            red.scale.set(40.3, 40.3, 40.3);
                            document.body.style.cursor = "grab";
                            redDiv.classList.remove('hidden');
                            redDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "blackWhiteMesh":
                            blackWhite.scale.set(20.3, 20.3, 20.3);
                            document.body.style.cursor = "grab";
                            blackWhiteDiv.classList.remove('hidden');
                            blackWhiteDiv.style.animation = "anim-lineUp 2s";
                            break;

                        case "blackWhiteMesh_1":
                            blackWhite.scale.set(20.3, 20.3, 20.3);
                            document.body.style.cursor = "grab";
                            blackWhiteDiv.classList.remove('hidden');
                            blackWhiteDiv.style.animation = "anim-lineUp 2s";
                            break;

                        default:
                            break;
                    }
                }
            } else {
                if (clips)
                    clips.forEach(function (clip) {
                        action = mixer.clipAction(clip);

                        action.paused = false;
                    });
                controls.autoRotate = true;
                controls.dampingFactor = 0.095;
            }
        }
        //Reset planet hover
        const resetHover = () => {
            if (!isShowingLabels) {
                if (brown)
                    brown.scale.set(20, 20, 20);
                document.body.style.cursor = "default";
                brownDiv.classList.add('hidden');

                if (orange)
                    orange.scale.set(40, 40, 40);
                document.body.style.cursor = "default";
                orangeDiv.classList.add('hidden');

                if (whiteBlue)
                    whiteBlue.scale.set(20, 20, 20);
                document.body.style.cursor = "default";
                whiteBlueDiv.classList.add('hidden');

                if (darkBlue)
                    darkBlue.scale.set(20, 20, 20);
                document.body.style.cursor = "default";
                darkBlueDiv.classList.add('hidden');

                if (sun)
                    sun.scale.set(60, 60, 60);
                document.body.style.cursor = "default";
                sunDiv.classList.add('hidden');

                if (lightBlue)
                    lightBlue.scale.set(20, 20, 20);
                document.body.style.cursor = "default";
                lightBlueDiv.classList.add('hidden');

                if (darkBrown)
                    darkBrown.scale.set(20, 20, 20);
                document.body.style.cursor = "default";
                darkBrownDiv.classList.add('hidden');

                if (red)
                    red.scale.set(40, 40, 40);
                document.body.style.cursor = "default";
                redDiv.classList.add('hidden');

                if (blackWhite)
                    blackWhite.scale.set(20, 20, 20);
                document.body.style.cursor = "default";
                blackWhiteDiv.classList.add('hidden');
            }
        }

        //Viewport mouse movement 
        const onMouseMove = (event) => {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        //Resize
        const onResize = () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            if (detectMobile()) {
                camera.fov = 100;
                camera.near = 0.6
            } else {
                camera.fov = 55;
                camera.near = 0.5
            }
            camera.updateProjectionMatrix();
            labelRenderer.setSize(window.innerWidth, window.innerHeight);
            render();
        };

        //Render the scene
        const animate = () => {
            count++;
            //Clock
            if (mixer)
                mixer.update(clock.getDelta());
            //Raycaster setup
            raycaster.setFromCamera(mouse, camera);
            //Reset hover new frame
            if (count < 100)
                setTimeout(() => {
                    resetHover();
                }, 4000);
            else
                resetHover();
            //Hover new frame
            onHover();
            //Update controls
            controls.update();
            //Render scene
            render();
            //Request new frame
            requestAnimationFrame(animate);
            labelRenderer.render(scene, camera);
        };

        const render = () => {
            renderer.render(scene, camera);
        }

        window.addEventListener("load", onResize, false);
        window.addEventListener("resize", onResize, false);
        window.addEventListener("click", onClick, false);
        window.addEventListener("mousemove", onMouseMove, false);

        init();
        generateGalaxy();

    </script>
</body>

</html>